(function(r){EL_Admin={init:function(){r("#tabs").tabs();this.admin_setting_tab();this.gallery_image();this.map();this.edit_full_address();this.el_load_venue();this.contact();this.date_time_picker();this.radio_single_banner();this.image_banner();this.add_image_ticket();this.remove_image_ticket();this.radio_seat_option();this.radio_type_price();this.add_image_ticket_map();this.remove_image_ticket_map();this.color_picker_ticket();this.add_ticket();this.add_seat_map();this.add_desc_seat_map();this.sortable_ticket();this.toggle_ticket();this.count_tickets();this.repair_key_ticket();this.remove_ticket();this.calendar();this.coupon();this.create_ticket_send_mail();this.download_ticket();this.update_status_proccess();this.add_image_category();this.remove_image_category();this.add_custom_booking();this.el_datepicker();this.ova_checkout_field();this.ova_metabox_booking_checkout_field();this.el_choose_event_type();this.el_choose_link_ticket();this.el_enable_cancellation_booking();this.el_show_hide_x_day_profit();this.el_check_book_before_minutes();this.el_check_schedules_time_book();this.el_check_calendar_recurrence_time_book()},el_choose_event_type:function(){if(r("input[name='ova_mb_event_event_type']").length>0){var e=r("input[name='ova_mb_event_event_type']:checked").val();if(e=="online"){r("#mb_basic #mb_location").hide();r("body").addClass("online_event")}else if(e=="classic"){r("#mb_basic #mb_location").show();r("body").removeClass("online_event")}r("input[name='ova_mb_event_event_type']").on("click",function(){e=r("input[name='ova_mb_event_event_type']:checked").val();if(e=="online"){r("#mb_basic #mb_location").hide();r("body").addClass("online_event")}else if(e=="classic"){r("#mb_basic #mb_location").show();r("body").removeClass("online_event")}})}},el_choose_link_ticket:function(){if(r("input[name='ova_mb_event_ticket_link']").length>0){var e=r("input[name='ova_mb_event_ticket_link']:checked").val();if(e=="ticket_internal_link"){r("#mb_ticket .ticket_internal_link").show();r("#mb_ticket .ticket_external_link").hide()}else if(e=="ticket_external_link"){r("#mb_ticket .ticket_internal_link").hide();r("#mb_ticket .ticket_external_link").show()}r("input[name='ova_mb_event_ticket_link']").on("click",function(){e=r("input[name='ova_mb_event_ticket_link']:checked").val();if(e=="ticket_internal_link"){r("#mb_ticket .ticket_internal_link").show();r("#mb_ticket .ticket_external_link").hide()}else if(e=="ticket_external_link"){r("#mb_ticket .ticket_internal_link").hide();r("#mb_ticket .ticket_external_link").show()}})}},el_show_hide_x_day_profit:function(){if(r("#manage_profit").length>0){var e=r("#manage_profit").val();if(e=="profit_2"){r(".x_day_profit").closest("tr").hide("slow")}else if(e=="profit_1"){r(".x_day_profit").closest("tr").show("slow")}r("#manage_profit").change(function(){var e=r("#manage_profit").val();if(e=="profit_2"){r(".x_day_profit").closest("tr").hide("slow")}else if(e=="profit_1"){r(".x_day_profit").closest("tr").show("slow")}})}},el_enable_cancellation_booking:function(){if(r("input[name='ova_mb_event_allow_cancellation_booking']").length>0){var e=r("input[name='ova_mb_event_allow_cancellation_booking']:checked").val();if(e=="yes"){r("#mb_cancel_booking .cancel_bk_before_x_day").show()}else if(e=="no"){r("#mb_cancel_booking .cancel_bk_before_x_day").hide()}r("input[name='ova_mb_event_allow_cancellation_booking']").on("click",function(){e=r("input[name='ova_mb_event_allow_cancellation_booking']:checked").val();if(e=="yes"){r("#mb_cancel_booking .cancel_bk_before_x_day").show()}else if(e=="no"){r("#mb_cancel_booking .cancel_bk_before_x_day").hide()}})}},ova_metabox_booking_checkout_field:function(){var e=r("#el_meta_booking_list_key_checkout_field").val();var t={};if(e){e=JSON.parse(e);for(var a in e){var i=r("#"+e[a]).val();var n=e[a];if(r(".el_booking_detail #"+n).hasClass("ova_select")){r(".el_booking_detail #"+n).on("change",function(){var e=r("#bk_data_checkout_field").val();e=JSON.parse(e);let t=r(this).val();var a=r(this).attr("id");e[a]=t;e=JSON.stringify(e);r("#bk_data_checkout_field").val(e)})}else{r(".el_booking_detail #"+n).on("keyup",function(){var e=r("#bk_data_checkout_field").val();e=JSON.parse(e);let t=r(this).val();var a=r(this).attr("id");e[a]=t;e=JSON.stringify(e);r("#bk_data_checkout_field").val(e)})}}}},ova_checkout_field:function(){var n="";n+="<tr>";n+='<td ><input type="text" name="ova_options_key[]" placeholder="Option Value" /></td>';n+='<td ><input type="text" name="ova_options_text[]" placeholder="Option Text" /></td>';n+='<td class="ova-box "><a href="javascript:void(0)" class=" ovabrw_addfield btn btn-blue" title="Add new option">+</a></td>';n+='<td class="ova-box "><a href="javascript:void(0)"  class=" ovabrw_remove_row btn btn-red" title="Remove option">x</a></td>';n+='<td class="ova-box sort ui-sortable-handle"></td>';n+="</tr>";jQuery(document).on("click",".ovabrw_addfield",function(e){var t=jQuery(this).closest("table");var a=t.find("tbody tr").size();var i=jQuery(".ova-wrap-popup-ckf").attr("height");if(i){i=parseInt(i)+5}else{i=110}jQuery(".ova-wrap-popup-ckf").attr("height",i);jQuery(".ova-wrap-popup-ckf").css("height",i+"vh");if(a>0){t.find("tbody tr:last").after(n)}else{t.find("tbody").append(n)}});jQuery(document).on("click",".ovabrw_remove_row",function(e){var t=jQuery(this).closest("table");jQuery(this).closest("tr").remove();var a=t.find("tbody tr").size();if(a==0){t.find("tbody").append(n)}});jQuery(".ovabrw_edit_field_form").on("click",function(e){var t=jQuery(this).data("data_edit");var a=t.name;var i=t.type?t.type:"text";var n=t.label;var c=t.placeholder;var o=t.default;var s=t.class;var r=t.ova_options_key;var _=t.ova_options_text;if(i=="select"){jQuery(".ova-wrap-popup-ckf .ova-popup-wrapper tr.ova-row-placeholder").css("display","none")}else{jQuery(".ova-wrap-popup-ckf .ova-popup-wrapper tr.ova-row-placeholder").css("display","table-row")}var l="";if(i==="select"){jQuery(".ova-wrap-popup-ckf .ova-popup-wrapper tr.row-options table.ova-sub-table tbody").empty();jQuery(".ova-wrap-popup-ckf .ova-popup-wrapper tr.row-options").css("display","table-row");r.forEach(function(e,t){l+="<tr>";l+='<td ><input type="text" name="ova_options_key[]" placeholder="Option Value" value="'+e+'" /></td>';l+='<td ><input type="text" name="ova_options_text[]" placeholder="Option Text" value="'+_[t]+'" /></td>';l+='<td class="ova-box "><a href="javascript:void(0)"  class="ovabrw_addfield btn btn-blue" title="Add new option">+</a></td>';l+='<td class="ova-box "><a href="javascript:void(0)" class="ovabrw_remove_row btn btn-red" title="Remove option">x</a></td>';l+='<td class="ova-box sort ui-sortable-handle"></td>';l+="</tr>"});jQuery(".ova-wrap-popup-ckf .ova-popup-wrapper tr.row-options table.ova-sub-table tbody").append(l)}else{jQuery(".ova-wrap-popup-ckf .ova-popup-wrapper tr.row-options").css("display","none")}jQuery('#ova_popup_field_form input[name="ova_action"]').val("edit");jQuery('#ova_popup_field_form input[name="ova_old_name"]').val(a);jQuery("#ova_type").val(i);jQuery("#ova_popup_field_form .ova-row-name input").val(a);jQuery("#ova_popup_field_form .ova-row-label input").val(n);jQuery("#ova_popup_field_form .ova-row-placeholder input").val(c);jQuery("#ova_popup_field_form .ova-row-default input").val(o);jQuery("#ova_popup_field_form .ova-row-class input").val(s);jQuery(".ova-wrap-popup-ckf").css("display","block")});jQuery("#ovabrw_openform").on("click",function(e){jQuery('#ova_popup_field_form input[name="ova_action"]').val("new");jQuery('#ova_popup_field_form input[name="ova_old_name"]').val("");jQuery(".ova-wrap-popup-ckf").css("display","block");jQuery("#ova_type").val("text");jQuery('.ova-wrap-popup-ckf input[name="name"]').val("");jQuery('.ova-wrap-popup-ckf input[name="label"]').val("");jQuery('.ova-wrap-popup-ckf input[name="placeholder"]').val("");jQuery('.ova-wrap-popup-ckf input[name="default"]').val("");jQuery(".ova-wrap-popup-ckf .row-options").css("display","none")});jQuery("#ovabrw_manage_custom_checkout_field").on("change",function(){jQuery(".ovabrw_product_custom_checkout_field_field").css("display","block");if(jQuery(this).val()=="all"){jQuery(".ovabrw_product_custom_checkout_field_field").css("display","none")}});jQuery("#ova_type").on("change",function(){jQuery(".ova-wrap-popup-ckf .ova-popup-wrapper tr.row-options").css("display","none");jQuery(".ova-wrap-popup-ckf .ova-popup-wrapper tr.ova-row-placeholder").css("display","table-row");if(jQuery(this).val()=="select"){jQuery(".ova-wrap-popup-ckf .ova-popup-wrapper tr.row-options").css("display","table-row");jQuery(".ova-wrap-popup-ckf .ova-popup-wrapper tr.ova-row-placeholder").css("display","none")}});jQuery("#ovabrw_select_all_field").on("click",function(e){var t=jQuery(this).prop("checked");jQuery(".ova-list-checkout-field table tbody tr td.ova-checkbox input").prop("checked",t)});jQuery("#ovabrw_close_popup").on("click",function(e){jQuery(".ova-wrap-popup-ckf").css("display","none")});jQuery(".ova_remove").on("click",function(e){var t=a("Are you sure?");if(!t){e.preventDefault()}});function a(e=""){var t=confirm(e);return t}},update_status_proccess:function(){r(".update-pay-profit").off().on("click",function(){if(!confirm("Are you sure change status?"))return false;var t=r(this);var e=t.attr("data-id");var a=t.attr("data-nonce");var i=t.attr("data-status");t.siblings(".submit-load-more").css("z-index",1);r.ajax({url:ajax_object.ajax_url,type:"POST",data:{action:"update_status_proccess",nonce_update_pay_profit:a,id_event:e,status:i},success:function(e){if(e=="success"){t.parent(".button-load-ova").siblings(".text").text(i);t.parent(".button-load-ova").css("display","none");r(".submit-load-more").css("z-index",-1)}else{t.parent(".button-load-ova").css("display","none");r(".submit-load-more").css("z-index",-1)}}})})},create_ticket_send_mail:function(){r(".create-ticket-send-mail").off().on("click",function(e){e.preventDefault();var t=r(this).attr("data-id-booking");var a=r(this).attr("data-nonce");r(this).siblings(".submit-load-more.sendmail").css({"z-index":"1"});r.ajax({url:ajax_object.ajax_url,type:"POST",data:{action:"create_ticket_send_mail",el_create_send_ticket_nonce:a,id_booking:t},success:function(e){var t=JSON.parse(e);r(".el_booking_detail .status").css("display","none");if(t.status=="success"){r(".submit-load-more.sendmail").css({"z-index":"-1"});r(".success").text(t.message).css({display:"block",color:"#28a745"})}else if(t.status="error"){r(".submit-load-more.sendmail").css({"z-index":"-1"});r(".error").text(t.message).css({display:"block",color:"#dc3545"})}}})})},download_ticket:function(){r(".download-ticket").off().on("click",function(e){e.preventDefault();var t=r(this).attr("data-id-booking");var a=r(this).attr("data-nonce");r(this).siblings(".submit-load-more.dowload-ticket").css({"z-index":"1"});r.ajax({url:ajax_object.ajax_url,type:"POST",data:{action:"download_ticket",el_download_ticket_nonce:a,id_booking:t},success:function(e){var t=JSON.parse(e);var a=t.list_url_ticket;if(t.status=="error"){r(".download-ticket").siblings(".submit-load-more.dowload-ticket").css({"z-index":"-1"});r(".submit-load-more.sendmail").css({"z-index":"-1"});r(".error").text(t.message).css({display:"block",color:"#dc3545"})}else{a.map(function(e){var t=document.createElement("a");t.href=e;let a=e.slice(e.lastIndexOf("/")+1);t.download=a;t.dispatchEvent(new MouseEvent("click"));r(".submit-load-more.dowload-ticket").css({"z-index":"-1"})});r.ajax({url:ajax_object.ajax_url,type:"POST",data:{action:"unlink_download_ticket",data_url:a},success:function(e){}})}}})})},admin_setting_tab:function(){r(".ova_el_wrapper_content > div:not(:first)").hide();r(document).on("click",".ova_el_settings_wrapper .nav-tab-wrapper a",function(e){e.preventDefault();var t=r(".ova_el_settings_wrapper .nav-tab-wrapper a");t.removeClass("nav-tab-active");var a=r(this),i=a.attr("data-tab");a.addClass("nav-tab-active");r(".ova_el_wrapper_content > div").hide();r(".ova_el_wrapper_content #"+i).fadeIn();return false});r("#checkout > div:not(:first)").hide();r(document).on("click","#checkout h3 a",function(e){e.preventDefault();r("#checkout h3 a").removeClass("active");var t=r(this),a=t.attr("id");t.addClass("active");r("#checkout > div").hide();r('#checkout > div[data-tab-id^="'+a+'"]').show()});r("#mail > div:not(:first)").hide();r(document).on("click","#mail h3 a",function(e){e.preventDefault();r("#mail h3 a").removeClass("active");var t=r(this),a=t.attr("id");t.addClass("active");r("#mail > div").hide();r('#mail > div[data-tab-id^="'+a+'"]').show()});r("#event > div:not(:first)").hide();r(document).on("click","#event h3 a",function(e){e.preventDefault();r("#event h3 a").removeClass("active");var t=r(this),a=t.attr("id");t.addClass("active");r("#event > div").hide();r('#event > div[data-tab-id^="'+a+'"]').show()})},gallery_image:function(){var n;r(document).on("click","#mb_gallery a.gallery-add",function(e){e.preventDefault();if(n)n.close();n=wp.media.frames.file_frame=wp.media({title:r(this).data("uploader-title"),button:{text:r(this).data("uploader-button-text")},multiple:true});n.on("select",function(){var a=r("#gallery-metabox-list li").index(r("#gallery-metabox-list li:last"));selection=n.state().get("selection");var i;selection.map(function(e,t){e=e.toJSON();i=a+(t+1);if(e.sizes.el_thumbnail){r("#gallery-metabox-list").append('<li><input type="hidden" name="ova_mb_event_gallery['+i+']" value="'+e.id+'"><img class="image-preview" src="'+e.sizes.el_thumbnail.url+'"><a class="change-image button button-small" href="#" data-uploader-title="Change image" data-uploader-button-text="Change image">Change image</a><small><a class="remove-image" href="#">Remove image</a></small></li>')}else{r("#gallery-metabox-list").append('<li><input type="hidden" name="ova_mb_event_gallery['+i+']" value="'+e.id+'"><img class="image-preview" src="'+e.sizes.full.url+'"><a class="change-image button button-small" href="#" data-uploader-title="Change image" data-uploader-button-text="Change image">Change image</a><small><a class="remove-image" href="#">Remove image</a></small></li>')}})});a();n.open()});r(document).on("click","#mb_gallery a.change-image",function(e){e.preventDefault();var t=r(this);if(n)n.close();n=wp.media.frames.file_frame=wp.media({title:r(this).data("uploader-title"),button:{text:r(this).data("uploader-button-text")},multiple:false});n.on("select",function(e){e=n.state().get("selection").first().toJSON();t.parent().find("input:hidden").attr("value",e.id);if(e.sizes.el_thumbnail){t.parent().find("img.image-preview").attr("src",e.sizes.el_thumbnail.url)}else{t.parent().find("img.image-preview").attr("src",e.sizes.full.url)}});n.open()});function t(){r("#mb_gallery #gallery-metabox-list li").each(function(e){r(this).find("input:hidden").attr("name","ova_mb_event_gallery["+e+"]")})}function a(){r("#mb_gallery #gallery-metabox-list").sortable({opacity:.6,stop:function(){t()}})}r(document).on("click","#mb_gallery a.remove-image",function(e){e.preventDefault();r(this).parents("li").animate({opacity:0},200,function(){r(this).remove();t()})})},edit_full_address:function(){r(document).find("#edit_full_address").change(function(){var e=r(this).prop("checked");if(e){r(this).val("checked");r(this).parents(".edit_address").find(".address").removeClass("readonly");r(this).parents(".edit_address").find(".address").removeAttr("readonly")}else{r(this).val("");r(this).parents(".edit_address").find(".address").attr("readonly","readonly").addClass("readonly")}})},map:function(){r.fn.event_map=function(e){e=r.extend({lat:-33.8688,lng:151.2195,zoom:17},e);var t=new google.maps.Map(document.getElementById("admin_show_map"),{center:{lat:e.lat,lng:e.lng},zoom:e.zoom,gestureHandling:"cooperative"});var a=document.getElementById("pac-input");var i=new google.maps.places.Autocomplete(a);i.bindTo("bounds",t);t.controls[google.maps.ControlPosition.TOP_LEFT].push(a);var n="";var c=new google.maps.InfoWindow({content:n});var o=new google.maps.Marker({map:t,position:t.getCenter()});o.addListener("click",function(){c.open(t,o)});i.addListener("place_changed",function(){c.close();var e=i.getPlace();r(".edit_address .address").val(r("#admin_show_map #pac-input").val());if(!e.geometry){return}if(e.geometry.viewport){t.fitBounds(e.geometry.viewport)}else{t.setCenter(e.geometry.location);t.setZoom(17)}o.setPlace({placeId:e.place_id,location:e.geometry.location});o.setVisible(true);r("#map_name").val(e.name);r("#map_address").val(e.formatted_address);r("#map_lat").val(e.geometry.location.lat());r("#map_lng").val(e.geometry.location.lng());c.open(t,o)})};if(typeof google!=="undefined"&&r("#admin_show_map").length>0){var e=parseFloat(r("input#map_lat").val());var t=parseFloat(r("input#map_lng").val());r("#admin_show_map").event_map({lat:e,lng:t,zoom:17})}},el_load_venue:function(){r("#add_venue").autocomplete({source:function(e,t){var a=n(e.term);r.ajax({url:ajax_object.ajax_url,type:"POST",dataType:"json",data:{action:"el_load_venue",keyword:a},success:function(e){t(e)}})},select:function(e,t){var a=i(r("#add_venue").val());a.pop();a.push(t.item.label);a.push("");r("#add_venue").val(a.join(", "));return false},delay:0});function i(e){return e.split(/,\s*/)}function n(e){return i(e).pop()}r(".check_venue").on("click",function(e){e.preventDefault();var t=r(this);var a=t.closest("#mb_venue").find("#add_venue").val();var i=[];t.closest("#mb_venue").find("#data_venue li").each(function(){i+=r(this).find("span").html();i+=", "});r.ajax({url:ajax_object.ajax_url,type:"POST",data:{action:"el_load_checklist_venue",add_venue:a,list_venue:i},success:function(e){t.closest("#mb_venue").find("#data_venue").html(e);t.closest("#mb_venue").find("#add_venue").val("");c()}})});function c(){r(document).find(".remove_venue").on("click",function(e){e.preventDefault();r(this).parent().remove()})}c()},contact:function(){var e=r("#info_organizer");var t=r(".prefix").val();if(e.attr("checked")=="checked"){r("#show_rewrite").css("display","block")}e.change(function(){var e=r(this).prop("checked");if(e==true){r(this).val("checked");r("#show_rewrite").css("display","block")}else{r(this).val("");r(this).removeAttr("checked");r("#show_rewrite").css("display","none")}});r("#social_organizer .add_social").on("click",function(e){e.preventDefault();var t=0;var t=r("#social_list .social_item").length;r.post(ajax_object.ajax_url,{action:"mb_add_social",data:{index:t}},function(e){r("#social_list").append(e);a();i()})});function a(){r("#social_list .social_item").each(function(e){r(this).find(".link_social").attr("name",t+"social_organizer["+e+"][link_social]");r(this).find(".icon_social").attr("name",t+"social_organizer["+e+"][icon_social]")})}function i(){r("#social_list").sortable({opacity:.6,stop:function(){a()}})}r(document).on("click","#social_organizer .remove_social",function(e){e.preventDefault();r(this).parents(".social_item").animate({opacity:0},200,function(){r(this).remove();a()})})},date_time_picker:function(){if(r().datepicker){r(".event_start_date, .event_end_date, .calendar_date, .calendar_end_date, .calendar_start_date, .coupon_start_date, .coupon_end_date, .start_ticket_date, .close_ticket_date, .disable_date .start_date, .disable_date .end_date, .start_ticket_date_map, .close_ticket_date_map, .date_cal").each(function(){var e=r(this).attr("data-format");r(this).datepicker({dateFormat:e,changeMonth:true,changeYear:true,minDate:0})})}if(r().datepicker){r(".range_datepicker.to, .range_datepicker.from").each(function(){var e=r(this).attr("data-format");r(this).datepicker({dateFormat:e,changeMonth:true,changeYear:true})})}if(r().datepicker){r(".range_datepicker_2.to, .range_datepicker_2.from").each(function(){var e=r(this).attr("data-format");r(this).datepicker({dateFormat:e,changeMonth:true,changeYear:true})})}if(r().timepicker){r(".event_start_time, .event_end_time, .calendar_start_time, .calendar_end_time, .calendar_recurrence_start_time, .calendar_recurrence_end_time, .coupon_start_time, .coupon_end_time, .start_ticket_time, .close_ticket_time, .start_ticket_time_map, .close_ticket_time_map").each(function(){if(r(this).attr("data-time")=="12"){var e="hh:mm p"}else{var e="HH:mm"}r(this).timepicker({timeFormat:e,interval:15,dynamic:false,dropdown:true,scrollbar:true})})}if(r().timepicker){r(".schedules_time .start_time,.schedules_time .end_time").each(function(){if(r(this).attr("data-time")=="12"){var e="hh:mm p"}else{var e="HH:mm"}r(this).timepicker({timeFormat:e,interval:15,dynamic:false,dropdown:true,scrollbar:true,change:function(){var e=r(this).closest(".item_schedules_time").find(".start_time").val();var t=r(this).closest(".item_schedules_time").find(".end_time").val();var a=r(this).closest(".item_schedules_time").attr("data-key");r(".wrap_disable_date .item_disable_date").each(function(){if(a==r(this).find('option[value="'+a+'"]').val()){r(this).find('option[value="'+a+'"]').html(e+"-"+t);if(r(".vendor_edit_event").length>0){r(this).find("select").select2()}}})}})})}},radio_single_banner:function(){r(".single_banner").on("click",function(){var e=r(this).val();if(e=="gallery"||e=="video"){r(this).closest(".wrap_single_banner").find(".wrap_image_banner").css("display","none")}else{r(this).closest(".wrap_single_banner").find(".wrap_image_banner").css("display","block")}})},image_banner:function(){r(".add_image_banner").on("click",function(e){e.preventDefault();var t=r(this);var a;if(a)a.close();a=wp.media({title:r(this).data("uploader-title"),button:{text:r(this).data("uploader-button-text")},multiple:false});a.on("select",function(e){e=a.state().get("selection").first().toJSON();t.parent().find("input").val(e.id);t.parent().find(".content_image").html('<img class="image-preview-banner" src="'+e.sizes.full.url+'" alt="image banner" style="max-height: 200px;"><button class="button remove_image_banner">Remove</button> ')});a.open()});r(document).on("click",".remove_image_banner",function(e){e.preventDefault();r(this).closest(".image_banner").find("input").val("");r(this).parent().empty()})},add_image_ticket:function(){var i;r(document).on("click","#mb_ticket .add_image_ticket",function(e){e.preventDefault();var a=r(this);if(i)i.close();i=wp.media.frames.file_frame=wp.media({multiple:false});i.on("select",function(){var t=a.parent().data("index"),e=i.state().get("selection");e.map(function(e){e=e.toJSON();if(e.sizes.el_thumbnail){r(a).html('<input type="hidden" name="ova_mb_event_ticket['+t+'][image_ticket]" id="image_ticket" value="'+e.id+'"><img class="image-preview-ticket" src="'+e.sizes.el_thumbnail.url+'" alt="image ticket">');r(a).parent().find(".remove_image_ticket").html("<span>x</span>")}else{r(a).html('<input type="hidden" name="ova_mb_event_ticket['+t+'][image_ticket]" id="image_ticket" value="'+e.id+'"><img class="image-preview-ticket" src="'+e.sizes.full.url+'" alt="image ticket">');r(a).parent().find(".remove_image_ticket").html("<span>x</span>")}})});i.open(a);return false})},add_image_ticket_map:function(){var a;r(document).on("click","#mb_ticket .add_image_ticket_map",function(e){e.preventDefault();var t=r(this);if(a)a.close();a=wp.media.frames.file_frame=wp.media({multiple:false});a.on("select",function(){selection=a.state().get("selection");selection.map(function(e){e=e.toJSON();if(e.sizes.el_thumbnail){r(t).html('<input type="hidden" name="ova_mb_event_ticket_map[image_ticket]" class="image_ticket_map" value="'+e.id+'"><img class="image-preview-ticket" src="'+e.sizes.el_thumbnail.url+'" alt="image ticket">');r(t).parent().find(".remove_image_ticket_map").html("<span>x</span>")}else{r(t).html('<input type="hidden" name="ova_mb_event_ticket_map[image_ticket]" class="image_ticket_map" value="'+e.id+'"><img class="image-preview-ticket" src="'+e.sizes.full.url+'" alt="image ticket">');r(t).parent().find(".remove_image_ticket_map").html("<span>x</span>")}})});a.open(t);return false})},remove_image_ticket_map:function(){r(document).on("click",".remove_image_ticket_map",function(e){e.preventDefault();var t=confirm("Are you sure?");var a=r(this).parent().data("index");if(t==true){r(this).empty();r(this).parent().find(".add_image_ticket_map").html('<i class="icon_plus_alt2"></i>Add ticket logo (.jpg, .png)<br><span>Recommended size: 130x50px</span>')}return false})},radio_seat_option:function(){r(".seat_option").click(function(){val=r(this).val();if(val=="map"){r(this).parents("#mb_ticket").find(".ticket_none_simple").css("display","none");r(this).parents("#mb_ticket").find(".ticket_map").css("display","block");r(this).parents("#mb_ticket").find(".add_ticket").css("display","none")}else{r(this).parents("#mb_ticket").find(".add_ticket").css("display","block");r(this).parents("#mb_ticket").find(".ticket_none_simple").css("display","block");r(this).parents("#mb_ticket").find(".ticket_map").css("display","none");if(val=="simple"){r(this).parents("#mb_ticket").find(".wrap_seat_list").css("display","flex");r(this).parents("#mb_ticket").find(".wrap_setup_seat").css("display","flex")}else{r(this).parents("#mb_ticket").find(".wrap_seat_list").css("display","none");r(this).parents("#mb_ticket").find(".wrap_setup_seat").css("display","none")}}r(this).parents("#mb_ticket").find(".add_ticket").attr("data-seat_option",val)})},radio_type_price:function(){r(document).find(".type_price").click(function(){r(this).closest(".col_price_ticket").find("#price_ticket").removeAttr("disabled");r(this).closest(".col_price_ticket").find("#price_ticket").css("display","block");var e=r(this).val();if(e=="free"){r(this).closest(".col_price_ticket").find("#price_ticket").attr({value:"0",disabled:"disabled"})}})},remove_image_ticket:function(){r(document).on("click",".remove_image_ticket",function(e){e.preventDefault();var t=confirm("Are you sure?");var a=r(this).parent().data("index");if(t==true){r(this).empty();r(this).parent().find(".add_image_ticket").html('<i class="icon_plus_alt2"></i>Add ticket logo (.jpg, .png)<br><span>Recommended size: 130x50px</span>')}return false})},color_picker_ticket:function(){if(r(".color_ticket").length>0){r(".color_ticket").wpColorPicker()}if(r(".color_label_ticket").length>0){r(".color_label_ticket").wpColorPicker()}if(r(".color_content_ticket").length>0){r(".color_content_ticket").wpColorPicker()}if(r(".map_color_type_seat").length>0){r(".map_color_type_seat").wpColorPicker()}if(r(".color_label_ticket_map").length>0){r(".color_label_ticket_map").wpColorPicker()}if(r(".color_ticket_map").length>0){r(".color_ticket_map").wpColorPicker()}if(r(".color_content_ticket_map").length>0){r(".color_content_ticket_map").wpColorPicker()}},toggle_ticket:function(){r(document).on("click","#mb_ticket .edit_ticket, #mb_ticket .save_ticket",function(e){e.preventDefault();r(this).closest(".ticket_item").find(".content_ticket").toggle();if(r(this).closest(".ticket_item").find(".content_ticket").css("display")=="none"){r(this).closest(".ticket_item").find(".heading_ticket").css("border-radius","10px")}else{r(this).closest(".ticket_item").find(".heading_ticket").css("border-radius","10px 10px 0 0")}return false});r(document).find('a[href="#mb_ticket"]').on("click",function(){r(this).closest("#tabs, .content").find(".content_ticket").css("display","none");if(r(this).closest("#tabs, .content").find(".content_ticket").css("display")=="none"){r(this).closest("#tabs, .content").find(".heading_ticket").css("border-radius","10px")}else{r(this).closest("#tabs, .content").find(".heading_ticket").css("border-radius","10px 10px 0 0")}return false})},add_ticket:function(){r("#mb_ticket .add_ticket").on("click",function(e){e.preventDefault();var t=r(this);t.find(".submit-load-more").css("z-index","9");EL_Admin.radio_seat_option();var a=EL_Admin.count_tickets();var i=r(this).data("event_id");var n=r(document).find(".add_ticket").attr("data-seat_option");r.post(ajax_object.ajax_url,{action:"mb_add_ticket",data:{event_id:i,count_tickets:a,seat_option:n}},function(e){t.find(".submit-load-more").css("z-index","-1");r("#mb_ticket .ticket_none_simple").append(e);EL_Admin.radio_type_price();EL_Admin.color_picker_ticket();EL_Admin.date_time_picker();EL_Admin.repair_key_ticket()})})},add_seat_map:function(){r("#mb_ticket .add_seat_map").on("click",function(e){e.preventDefault();var t=r(this);t.find(".submit-load-more").css("z-index","9");EL_Admin.radio_seat_option();var a=r(document).find("#mb_ticket .item_seat").length;console.log(a);r.post(ajax_object.ajax_url,{action:"add_seat_map",data:{count_seat:a}},function(e){t.find(".submit-load-more").css("z-index","-1");r("#mb_ticket .wrap_seat_map").append(e);i();n()})});function i(){r(document).on("click",".remove_seat_map",function(e){e.preventDefault();r(this).closest(".item_seat").remove();n()})}i();function n(){var t=0;r("#mb_ticket .item_seat").each(function(){var e=r(this).data("prefix");r(this).find(".map_name_seat").attr("name",e+"ticket_map[seat]["+t+"][id]");r(this).find(".map_price_seat").attr("name",e+"ticket_map[seat]["+t+"][price]");t++})}},add_desc_seat_map:function(){r("#mb_ticket .add_desc_seat_map").on("click",function(e){e.preventDefault();var t=r(this);t.find(".submit-load-more").css("z-index","9");EL_Admin.radio_seat_option();var a=r(document).find("#mb_ticket .item_desc_seat").length;console.log(a);r.post(ajax_object.ajax_url,{action:"add_desc_seat_map",data:{count_seat:a}},function(e){t.find(".submit-load-more").css("z-index","-1");r("#mb_ticket .wrap_desc_seat_map").append(e);i();n();EL_Admin.color_picker_ticket()})});function i(){r(document).on("click",".remove_desc_seat_map",function(e){e.preventDefault();r(this).closest(".item_desc_seat").remove();n()})}i();function n(){var t=0;r("#mb_ticket .item_desc_seat").each(function(){var e=r(this).data("prefix");r(this).find(".map_type_seat").attr("name",e+"ticket_map[desc_seat]["+t+"][map_type_seat]");r(this).find(".map_price_type_seat").attr("name",e+"ticket_map[desc_seat]["+t+"][map_price_type_seat]");r(this).find(".map_desc_type_seat").attr("name",e+"ticket_map[desc_seat]["+t+"][map_desc_type_seat]");r(this).find(".map_color_type_seat").attr("name",e+"ticket_map[desc_seat]["+t+"][map_color_type_seat]");t++})}},sortable_ticket:function(){},count_tickets:function(){var e=r("#mb_ticket .ticket_item").length;return e},repair_key_ticket:function(){var e=EL_Admin.count_tickets();var t=0;r("#mb_ticket .ticket_item").each(function(){var e=r(this).data("prefix");r(this).find("#ticket_id").attr("name",e+"ticket["+t+"][ticket_id]");r(this).find("#name_ticket").attr("name",e+"ticket["+t+"][name_ticket]");r(this).find(".type_price").attr("name",e+"ticket["+t+"][type_price]");r(this).find("#price_ticket").attr("name",e+"ticket["+t+"][price_ticket]");r(this).find("#number_total_ticket").attr("name",e+"ticket["+t+"][number_total_ticket]");r(this).find("#number_min_ticket").attr("name",e+"ticket["+t+"][number_min_ticket]");r(this).find("#number_max_ticket").attr("name",e+"ticket["+t+"][number_max_ticket]");r(this).find(".start_ticket_date").attr("name",e+"ticket["+t+"][start_ticket_date]");r(this).find("#start_ticket_time").attr("name",e+"ticket["+t+"][start_ticket_time]");r(this).find(".close_ticket_date").attr("name",e+"ticket["+t+"][close_ticket_date]");r(this).find("#close_ticket_time").attr("name",e+"ticket["+t+"][close_ticket_time]");r(this).find("#color_ticket").attr("name",e+"ticket["+t+"][color_ticket]");r(this).find("#color_label_ticket").attr("name",e+"ticket["+t+"][color_label_ticket]");r(this).find("#color_content_ticket").attr("name",e+"ticket["+t+"][color_content_ticket]");r(this).find("#desc_ticket").attr("name",e+"ticket["+t+"][desc_ticket]");r(this).find("#image_ticket").attr("name",e+"ticket["+t+"][image_ticket]");r(this).find(".setup_seat").attr("name",e+"ticket["+t+"][setup_seat]");t++});EL_Admin.radio_checked_ticket()},radio_checked_ticket:function(){r("#mb_ticket .ticket_item").find("input:radio:checked").each(function(){r(this).attr("data-checked","true");r(this).prop("checked",true);r(this).trigger("click")})},remove_ticket:function(){r(document).on("click",".delete_ticket",function(){r(this).closest(".ticket_item").remove();EL_Admin.repair_key_ticket()})},calendar:function(){r(".calendar .add_calendar").on("click",function(e){e.preventDefault();var t=r(this);var a=0;var a=t.parent().find(".item_calendar").length;t.find(".submit-load-more").css("z-index","9");r.post(ajax_object.ajax_url,{action:"mb_add_calendar",data:{index:a}},function(e){t.find(".submit-load-more").css("z-index","-1");r(".list_calendar").append(e);i();n();EL_Admin.date_time_picker()})});function i(){var e=0;r(".calendar .item_calendar").each(function(){r(this).find(".calendar_id").attr("name","ova_mb_event_calendar["+e+"][calendar_id]");r(this).find(".calendar_date").attr("name","ova_mb_event_calendar["+e+"][date]");r(this).find(".calendar_start_time").attr("name","ova_mb_event_calendar["+e+"][start_time]");r(this).find(".calendar_end_time").attr("name","ova_mb_event_calendar["+e+"][end_time]");r(this).find(".number_time_book_before").attr("name","ova_mb_event_calendar["+e+"][book_before_minutes]");e++})}i();function n(){if(r(".list_calendar").length>0&&r(window).width()>767.98){r(".list_calendar").sortable({opacity:.6,stop:function(){i()}})}}r(document).on("click",".calendar .remove_calendar",function(e){e.preventDefault();r(this).parent().animate({opacity:0},200,function(){r(this).remove();i()})});n();r(document).find(".option_calendar input").click(function(){var e=r(this).val();if(e!=="auto"){r(this).closest(".calendar").find(".manual").css("display","block");r(this).closest(".calendar").find(".auto").css("display","none");r(this).closest(".calendar").find(".calendar_recurrence_start_time, .calendar_recurrence_end_time, .calendar_start_date, .calendar_end_date,.schedules_time .start_time,.schedules_time .end_time").removeAttr("required");r(this).closest(".calendar").find(".calendar_date, .end_date .calendar_end_date, .calendar_start_time, .calendar_end_time").attr("required","required")}else{r(this).closest(".calendar").find(".manual").css("display","none");r(this).closest(".calendar").find(".auto").css("display","block");r(this).closest(".calendar").find(".calendar_recurrence_start_time, .calendar_recurrence_end_time, .calendar_start_date, .calendar_end_date,.schedules_time .start_time,.schedules_time .end_time").attr("required","required");r(this).closest(".calendar").find(".calendar_date, .end_date .calendar_end_date, .calendar_start_time, .calendar_end_time").removeAttr("required")}if(e=="auto"&&r(this).closest(".calendar").find(".schedules_time .start_time").length>0){r(this).closest(".calendar").find(".calendar_recurrence_start_time, .calendar_recurrence_end_time").removeAttr("required")}});function e(){r(".interval-desc").hide();var e="-plural";if(r("input#recurrence-interval").val()==1||r("input#recurrence-interval").val()=="")e="-singular";var t="span#interval-"+r("select#recurrence-frequency").val()+e;r(t).show()}function t(){r(".alternate-selector").hide();r("#"+r("select#recurrence-frequency").val()+"-selector").show();r("#"+r("select#recurrence-frequency").val()+"-selector").css("display","inline-block")}e();t();r("input#recurrence-interval").keyup(e);r("select#recurrence-frequency").change(e);r("select#recurrence-frequency").change(t);function a(){r(".disable_date .add_disable_date").click(function(e){e.preventDefault();var t=r(this);var a=0;var a=t.parents(".disable_date").find(".item_disable_date").length;var i=[];t.parents("#mb_calendar").find(".item_schedules_time").each(function(){var e={start_time:r(this).find(".start_time").val(),end_time:r(this).find(".end_time").val()};i.push(e)});t.find(".submit-load-more").css("z-index","9");r.post(ajax_object.ajax_url,{action:"mb_add_disable_date",data:{index:a,schedules_time:i}},function(e){t.find(".submit-load-more").css("z-index","-1");r(".wrap_disable_date").append(e);EL_Admin.date_time_picker();if(r(".vendor_edit_event").length>0){r(".wrap_disable_date").find(".item_disable_date").last().find(".schedules_time").select2()}})})}a();function c(){var e=0;r(".calendar .item_disable_date").each(function(){r(this).find(".start_date").attr("name","ova_mb_event_disable_date["+e+"][start_date]");r(this).find(".end_date").attr("name","ova_mb_event_disable_date["+e+"][end_date]");r(this).find(".schedules_time").attr("name","ova_mb_event_disable_date["+e+"][schedules_time]");e++})}r(document).on("click",".disable_date .remove_disable_date",function(e){e.preventDefault();r(this).parents(".item_disable_date").animate({opacity:0},200,function(){r(this).remove();c()})});function o(){r(".schedules_time .add_schedules_time").click(function(e){e.preventDefault();var n=r(this);var t=0;var t=n.parents(".schedules_time").find(".item_schedules_time").length;n.closest("#mb_calendar").find(".calendar_recurrence_start_time,.calendar_recurrence_end_time").removeAttr("required");n.closest("#mb_calendar").find(".time-range").hide();r(".wrap_disable_date .item_disable_date").each(function(){r(this).find(".disable_time").show()});n.find(".submit-load-more").css("z-index","9");r.post(ajax_object.ajax_url,{action:"mb_add_schedules_time",data:{index:t}},function(e){n.find(".submit-load-more").css("z-index","-1");r(".wrap_schedules_time").append(e);EL_Admin.date_time_picker();var t=r(".wrap_schedules_time .item_schedules_time").last().find(".start_time").val();var a=r(".wrap_schedules_time .item_schedules_time").last().find(".end_time").val();var i=r(".wrap_schedules_time .item_schedules_time").last().attr("data-key");r(".wrap_disable_date .item_disable_date").each(function(){r(this).find("select").append("<option value = "+i+">"+t+"-"+a+"</option>");r(this).find("select").select2()})})})}o();function s(){var e=0;r(".calendar .item_schedules_time").each(function(){r(this).find(".start_time").attr("name","ova_mb_event_schedules_time["+e+"][start_time]");r(this).find(".end_time").attr("name","ova_mb_event_schedules_time["+e+"][end_time]");r(this).find(".schedules_time_book_before").attr("name","ova_mb_event_schedules_time["+e+"][book_before]");r(this).attr("data-key",e);e++})}r(document).on("click",".schedules_time .remove_schedules_time",function(e){e.preventDefault();if(r(this).closest(".calendar").find("input[name='ova_mb_event_schedules_time[1][start_time]']").length<=0){r(this).closest(".calendar").find(".time-range").show();r(this).closest(".calendar").find(".time-range .calendar_recurrence_start_time").attr("required","required");r(this).closest(".calendar").find(".time-range .calendar_recurrence_end_time").attr("required","required");r(".wrap_disable_date .item_disable_date").each(function(){r(this).find(".disable_time").hide()})}var t=r(this).parents(".item_schedules_time").attr("data-key");r(".wrap_disable_date .item_disable_date").each(function(){if(t==r(this).find('option[value="'+t+'"]').val()){r(this).find('option[value="'+t+'"]').remove();if(r(".vendor_edit_event").length>0){r(this).find("select").select2()}}var e=-1;r(this).find("select option").each(function(){r(this).attr("value",e);e++})});r(this).parents(".item_schedules_time").animate({opacity:0},200,function(){r(this).remove();s()})})},coupon:function(){r(".coupon .add_coupon").on("click",function(e){e.preventDefault();var t=r(this);var a=0;var a=t.parent().find(".item_coupon").length;var i=t.data("post_id");t.find(".submit-load-more").css("z-index","9");r.post(ajax_object.ajax_url,{action:"mb_add_coupon",data:{index:a,post_id:i}},function(e){t.find(".submit-load-more").css("z-index","-1");r(".list_coupon").append(e);n();c();EL_Admin.date_time_picker();o();s()})});function n(){var t=0;r(".coupon .item_coupon").each(function(){r(this).find(".coupon_id").attr("name","ova_mb_event_coupon["+t+"][coupon_id]");r(this).find(".discount_code").attr("name","ova_mb_event_coupon["+t+"][discount_code]");r(this).find(".discount_amout_number").attr("name","ova_mb_event_coupon["+t+"][discount_amout_number]");r(this).find(".discount_amount_percent").attr("name","ova_mb_event_coupon["+t+"][discount_amount_percent]");r(this).find(".coupon_start_date").attr("name","ova_mb_event_coupon["+t+"][start_date]");r(this).find(".coupon_end_date").attr("name","ova_mb_event_coupon["+t+"][end_date]");r(this).find(".coupon_start_time").attr("name","ova_mb_event_coupon["+t+"][start_time]");r(this).find(".coupon_end_time").attr("name","ova_mb_event_coupon["+t+"][end_time]");r(this).find(".coupon_all_ticket").attr("name","ova_mb_event_coupon["+t+"][all_ticket]");r(this).find(".coupon_quantity").attr("name","ova_mb_event_coupon["+t+"][quantity]");var e=0;r(this).find(".item_ticket").each(function(){r(this).find(".list_ticket").attr("name","ova_mb_event_coupon["+t+"][list_ticket]["+e+"]");e++});t++})}n();function c(){if(r(".list_coupon").length>0&&r(window).width()>767.98){r(".list_coupon").sortable({opacity:.6,stop:function(){n()}})}}r(document).on("click",".coupon .remove_coupon",function(e){e.preventDefault();r(this).parent().animate({opacity:0},200,function(){r(this).remove();n()})});c();function o(){r(document).find(".coupon_all_ticket").change(function(){var e=r(this).prop("checked");if(e){r(this).val("checked")}else{r(this).val("")}if(e){r(this).closest(".number_coupon_ticket").find(".item_ticket input").attr("checked","checked")}else{r(this).closest(".number_coupon_ticket").find(".item_ticket input").removeAttr("checked")}})}o();function s(){r(document).find(".number_coupon_ticket .item_ticket input").change(function(){var e=r(this).prop("checked");if(e){r(this).attr("checked","checked")}else{r(this).removeAttr("checked")}var t=r(this).closest(".wrap_list_ticket").find(".item_ticket").length;var a=r(this).closest(".wrap_list_ticket").find("input:checked").length;if(t==a){r(this).closest(".number_coupon_ticket").find(".coupon_all_ticket").val("checked");r(this).closest(".number_coupon_ticket").find(".coupon_all_ticket").attr("checked","checked")}else{r(this).closest(".number_coupon_ticket").find(".coupon_all_ticket").val("");r(this).closest(".number_coupon_ticket").find(".coupon_all_ticket").removeAttr("checked")}})}s();function e(){r(document).find(".item_coupon").each(function(){var e=r(this).find(".number_coupon_ticket .item_ticket");var t=e.find("input").length;var a=e.find("input:checked").length;if(t==a){e.closest(".number_coupon_ticket").find(".coupon_all_ticket").val("checked");e.closest(".number_coupon_ticket").find(".coupon_all_ticket").attr("checked","checked")}else{e.closest(".number_coupon_ticket").find(".coupon_all_ticket").val("");e.closest(".number_coupon_ticket").find(".coupon_all_ticket").removeAttr("checked")}})}e()},add_image_category:function(){r(document).on("click",".term-image-wrap .gallery-add",function(e){let t=r(this);let a;e.preventDefault();if(a){a.open();return}a=wp.media.frames.file_frame=wp.media({title:t.data("uploader-title"),button:{text:t.data("uploader-button-text")},multiple:false});a.on("select",function(){attachment=a.state().get("selection").first().toJSON();if(attachment.sizes.el_img_rec){r(t).parent().find(".wrap_image_cat").html('<input type="hidden" name="_category_image" class="image_category" value="'+attachment.id+'"><img class="image-preview" src="'+attachment.sizes.el_img_rec.url+'" alt="Banner Category"><small><a class="remove-image" href="#">Remove image</a></small>')}else{r(t).parent().find(".wrap_image_cat").html('<input type="hidden" name="_category_image" class="image_category" value="'+attachment.id+'"><img class="image-preview" src="'+attachment.sizes.full.url+'" alt="Banner Category"><small><a class="remove-image" href="#">Remove image</a></small>')}});a.open()})},remove_image_category:function(){r(document).on("click",".wrap_image_cat .remove-image",function(e){let t=r(this);e.preventDefault();t.parents(".wrap_image_cat").html('<input type="hidden" name="_category_image" class="image_category" value=""><img class="image-preview" src="" alt="">')})},add_custom_booking:function(){r(".el_booking_detail .cart-total a").on("click",function(e){e.preventDefault();var t=r(this);var a=0;var i=t.parents(".el_booking_detail").find(".seat_option_type").val();var a=r(document).find(".el_booking_detail .cart-item").length;r.post(ajax_object.ajax_url,{action:"add_custom_booking",data:{type_seat:i,index:a}},function(e){r(".el_booking_detail .cart tbody").append(e)})});r(document).on("click",".el_booking_detail .delete_item",function(e){let t=r(this);e.preventDefault();t.parents(".cart-item").remove()});function e(){var e=0;var t=r(".el_booking_detail .seat_option_type").data("prefix");var a=r(".el_booking_detail .seat_option_type").val();r(".el_booking_detail .cart-item").each(function(){if(a=="map"){r(this).find("input.name").attr("name",t+"cart["+e+"][id]");r(this).find("input.qty").attr("name",t+"cart["+e+"][qty]");r(this).find("input.seat").attr("name",t+"cart["+e+"][seat]");r(this).find("input.price").attr("name",t+"cart["+e+"][price]")}else{r(this).find("input.name").attr("name",t+"cart["+e+"][name]");r(this).find("input.qty").attr("name",t+"cart["+e+"][qty]");r(this).find("input.seat").attr("name",t+"cart["+e+"][seat]");r(this).find("input.price").attr("name",t+"cart["+e+"][price]")}e++})}r(document).on("change",".el_booking_detail .id_event",function(e){var t=r(this);var a=t.val();var i=r(".el_booking_detail .id_cal").data("id_cal");e.preventDefault();r.post(ajax_object.ajax_url,{action:"el_get_idcal_seatopt",data:{id_event:a,id_cal:i}},function(e){r(".el_booking_detail .id_cal").html(e);var t=r(".el_booking_detail .seat_option").val();r(".el_booking_detail .seat_option_type").val(t);r(".el_booking_detail .cart tbody").html("");var a="";if(t=="none"||t=="simple"){var i=r(".el_booking_detail .detail_booking_head_cart").data("name");var n=r(".el_booking_detail .detail_booking_head_cart").data("qty");var c=r(".el_booking_detail .detail_booking_head_cart").data("sub_total");a='<tr><th class="name">'+i+'</th><th class="qty">'+n+'</th><th class="sub-total">'+c+"</th></tr>"}else if(t=="map"){var o=r(".el_booking_detail .detail_booking_head_cart").data("name");var s=r(".el_booking_detail .detail_booking_head_cart").data("sub_total");a="<tr><th>"+o+"</th><th>"+s+"</th></tr>"}r(".el_booking_detail .cart thead").html(a)})})},el_datepicker:function(){if(r().datepicker){r(".membership_date").each(function(){var e=r(this).attr("data-format");r(this).datepicker({dateFormat:e,changeMonth:true,changeYear:true})})}},el_check_book_before_minutes:function(){r(".number_time_book_before").on("change",function(){var e=r(this).val();var t=r(this).closest(".item_calendar").find(".calendar_date").val();var a=r(this).closest(".item_calendar").find(".calendar_end_date").val();var i=r(this).closest(".item_calendar").find(".calendar_start_time").val();var n=r(this).closest(".item_calendar").find(".calendar_end_time").val();r.ajax({url:ajax_object.ajax_url,type:"POST",data:{action:"el_check_book_before_minutes",number_time:e,date:t,end_date:a,start_time:i,end_time:n},success:function(e){var t=JSON.parse(e);if(t.msg){alert(t.msg);return false}}})})},el_check_schedules_time_book:function(){r(".schedules_time_book").on("change",function(){var e=r(this).val();var t=r(this).closest(".item_schedules_time").find(".start_time").val();var a=r(this).closest(".item_schedules_time").find(".end_time").val();r.ajax({url:ajax_object.ajax_url,type:"POST",data:{action:"el_check_schedules_time_book",number_time:e,start_time:t,end_time:a},success:function(e){var t=JSON.parse(e);if(t.msg){alert(t.msg);return false}}})})},el_check_calendar_recurrence_time_book:function(){r(".calendar_recurrence_time_book_before").on("change",function(){var e=r(this).val();var t=r(this).closest(".time-range").find(".calendar_recurrence_start_time").val();var a=r(this).closest(".time-range").find(".calendar_recurrence_end_time").val();r.ajax({url:ajax_object.ajax_url,type:"POST",data:{action:"el_check_calendar_recurrence_time_book",number_time:e,start_time:t,end_time:a},success:function(e){var t=JSON.parse(e);if(t.msg){alert(t.msg);return false}}})})}};r(document).ready(function(){EL_Admin.init()})})(jQuery);